<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>爬虫编写注意事项</title>
    <link rel="stylesheet" type="text/css" href="Semantic/semantic.min.css">
    <script src="Semantic/semantic.min.js"></script>
</head>
<body>

<div class="ui inverted vertical masthead center aligned segment">

          <h1 class="ui inverted header">
            爬虫编写过程中遇到的问题
        </h1>
    <div class="text container">
        <h3>
            所有的模块,统一记录格式：应当包含网站链接，爬虫名称，爬虫时间，启动方式，中间遇到的问题
        </h3>
        <p>
            应当统一添加数据规范化处理模块，所以最后存储的时候应当调用一个规范化功能的函数。规范化成item中的字段格式
        </p>
        <p>
            注意字段中的数据类型，比如reply_count应当是int类型，而不是string。
        </p>
        <p>
            注意这个项目使用的是scrapy-redis来写的，要注意每个网站的启动主url。
        </p>
        <p>
            分中英文的网站，spider_name都要加上C或者E，分别代表中文和英文。
        </p>
    </div>


    <div class="center blue aligned column">
        <div class="center aligned column"></div>

    </div>

</div>

<div class="ui vertical masthead aligned segment">
    <div class="ui middle aligned stackable grid container">
        <div class="html ui top attached segment">
            <div class="ui bulleted list">
                <div class="item">
                    <h2 style="color: red">
                        即时：注意事项
                    </h2>
                    <div class="ui bulleted list">
                        <div class="item">
                            像澎湃新闻里边的那种没有抓取到内容的评论，应该舍弃掉，所以应该有一个单独的模块，在数据的流的最末端，做一个判断，如果不合适就舍弃，并log记录之。
                        </div>
                        <div class="item">
                            spider_time统一在最后添加。
                        </div>
                        <div class="item">
                            临时添加了params这个字段，之前数据库里边一直没有
                        </div>
                        <div class="item">
                                最终的规范化模块，比如时间戳的处理，可能有问题
                        </div>
                        <div class="item">
                            今天在今日头条中发现，deal_comment的数据return之后，没有进入pipeline中。所以yield和return不能同时使用。
                        </div>
                        <div class="item">
                            pipeline功能和standroid模块的功能有重复。
                        </div>
                        <div class="item">
                            依赖库:pyexecjs,pymongo,scrapy,scrapyd,redis。
                        </div>
                        <div class="item">
                            今日头条过滤掉了不少，一会检查是怎么回事。
                        </div>
                        <div class="item">
                            这里边每个爬虫并没有专门设置headers和其它的自定义设置。
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="ui vertical masthead aligned segment">
    <div class="ui middle aligned stackable grid container">
        <div class="html ui top attached segment"><div class="ui bulleted list">
            <div class="item">
                <h2>
                    多杰雄登---http://www.xiongdeng.com
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.xiongdeng.com">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        <a class="ui label">
                            全部设置成1111-11-11 11：11：11
                        </a>
                        里边没有publish_time
                    </div>
                    <div class="item">
                        <a class="ui label">
                            已处理
                        </a>
                        文章中有下一页
                    </div>

                </div>
            </div>
            <div class="item">
                <h2>
                    http://www.dorjeshugden.com
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.dorjeshugden.com/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>

                </div>
                <div class="list">
                    <div class="item">
                        无记录
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    khabdha
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.khabdha.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        无记录
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    chinaaid
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.chinaaid.net">
                        网站链接
                    </a>
                    <div class="ui button">
                        编写时间 2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        无记录
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetsun
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="https://www.tibetsun.com/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        无记录
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    middleway
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://woeser.middle-way.net/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        无记录，唯色的网站，里边全是博客，都感觉没有主页一样
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tchrd
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://tchrd.org/chinese/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        里边通过一个url来启动的话效果不太好，好像抓不全。
                    </div>
                    <div class="item">
                        <a class="text container">
                            http://tchrd.org/chinese/%E8%A5%BF%E8%97%8F%E4%B8%80%E5%BA%A7%E5%B7%A8%E5%A4%A7%E7%9A%84%E7%9B%91%E7%8B%B1%E8%A5%BF%E8%97%8F%E4%BA%BA%E6%9D%83%E4%B8%8E%E6%B0%91%E4%B8%BB%E4%BF%83%E8%BF%9B%E4%B8%AD%E5%BF%83%E5%8F%91%E5%B8%83/
                        </a>
                        <a class="text container">
                            http://tchrd.org/chinese/1999-%E8%A5%BF%E8%97%8F%E4%BA%BA%E6%9D%83%E6%8A%A5%E5%91%8A-%E6%91%98%E8%A6%81/
                        </a>
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    studentsforafreetibet
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="https://www.studentsforafreetibet.org/media-center/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站里边的内容十分杂乱，目前打算只抓取media板块中的内容。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetonline
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站里边的内容都是视频，暂时没有抓取
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetanyouthcongress
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="https://www.tibetanyouthcongress.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        在写这个网站的时候，发现如果所有的id都设置成urlmd5的话，id就没意义了。但是很多id都是藏文，做成id的话估计也有些不妥。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    rtycnynj
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站失效了
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetanwomen
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://tibetanwomen.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站研究出来了很多东西
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetswiss
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://www.tibetswiss.ch/index-bo.html">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站全是藏文，我把左上角的几个模块都添加进去了,分别是 europe-chitue-bo.html tibet-office-genf-bo.html chatrel.html(里边是pdf) download-bo.html partner-links-bo.html video-libary-bo.html photo-gallary-bo.html audios-tib.html news-archive-bo.html
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    atc_org_au
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="https://www.atc.org.au/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编写时间：2018-01-10
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站从主页进去抓不全，只能抓50个左右的新闻。起始链接是：https://www.atc.org.au/。添加了跟进板块和板块页数的链接之后，这个问题解决了。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    https://www.tibet-initiative.de
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站没法爬，因为这个网站板块分类不明确。所以放弃了
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    http://www.savetibet.org/
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.savetibet.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个真的是全抓。里边的一个字段貌似有点问题，publish_user_id很多时候没有，而且新闻类的publish_user一般都是publish_user_href。所以我想 新闻类的publish_user_href不是太重要吧！注意要将print的语句给注释掉。前边content内容字段的，没加join的要把join加上
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    http://dhokhamchushigangdrug.com/
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站也有很多东西,可能是文档的网页一共只有两种类型。 Your access to this site has been limited!!!!!!!!!!! 这个烂网站还有反扒措施。。。。。。
                    </div>
                    <div class="item">
                        所以这个网站的跟进策略是全部跟进，在parse函数中再做判断处理
                        <div class="ui button">
                            2018-04-25
                        </div>
                    </div>
                </div>
            </div>

            <div class="item">
                <h2>
                    http://www.chushigangdrug.ch/aktuelles/
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站也是杂乱无章，还是用遍历的方法爬取
                    </div>
                    <div class="item">
                        网站里边都是些什么东西额！！！网站里边的链接都无法跟进访问。明天调试内容： url的进一步跟进，更多网页版式的分类处理。不能通过start_requests来访问。
                    </div>
                    <div class="item">
                        这里边的东西看不懂，和上边的dhokhamchushigangdrug一样，都是全部跟进，之后再判断是否是自己需要的网页。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    http://www.tibetsociety.com/
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://www.tibetsociety.com/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        遍历整个网站，这个相对容易一些
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    xiongdeng多杰雄登，
                </h2>
                <div class="list">
                    <div class="item">
                        想不到这个网站竟然还有论坛，！！！！！！！！！！！！！！！！,只爬取了p=123这样的网页
                    </div>
                    <div class="item">
                        <p class="text" style="color: red">
                            多杰雄登----------------------赞哥的服务器被封了封了，因为反爬---------------------3.29日
                        </p>
                    </div>
                    <div class="item">
                        已经添加多杰雄登英文版的爬虫。网站里边的评论还有自评论，因为太少，所以没有抓取。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    tibetanentrepreneurs
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://tibetanentrepreneurs.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站跟进两中类型的链接，这个里边有不少外链，要做好allow_domain设置。跟进的是主页链接http://tibetanentrepreneurs.org/
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    ftchinese
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.ftchinese.com/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编写时间：2018-01-12
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站得遍历抓取没有做好，reply_nodes也没有做好
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    secretchina
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://www.visiontimes.com/">
                        英文网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="ui container aligned">
                    <a class="blue ui button" href="https://www.secretchina.com/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        看中国的中文网站，网址自动跳转
                    </div>
                    <div class="item">
                        并没有设置太多的关联规则，页面信息估计会抓不全。后边再做测试
                    </div>
                    <div class="item">
                        http://www.visiontimes.com这个网站是它的英文网站。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    chineseopen
                </h2>
                <div class="list">
                    <div class="item">
                        这里边多数都是blog的文章,../blog/achivers/12345
                    </div>
                    <div class="item">
                        里边几乎没有评论，虽然有评论模块，但是评论不多
                    </div>
                    <div class="item">
                        没有抓取到阅读次数，代码应该是正常的，至少在jupyter中是这样
                    </div>
                    <div class="item">
                        2018-03-28日添加英文板块 www.chinesepen.org/english现在添加英文内容
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    radiosoh
                </h2>
                <div class="list">
                    <div class="item">
                        这里的reply_count和nodes都没有写，因为感觉几乎没有评论。
                    </div>
                    <div class="item">
                        这个网站中文的板块有些少，只抓了china板块里边的内容。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    freetibetanheroes.org
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站里边的新闻不是这个网站的，会跳转到其它页面
                    </div>

                </div>
            </div>
            <div class="item">
                <h2>
                    uyghurcongress
                </h2>
                <div class="ui container aligned">
                    <a class="ui button blue" href="http://www.uyghurcongress.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        文档上说这个网站又很多中语言，然而我初步就只发现了英文，所以后边也只抓英文。
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    dongtaiwang.com
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站里边所有的新闻都是其它网站的，所以没有抓取
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    www.kirti92.org
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.kirti92.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2081-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        这个网站里边的内容都是藏文
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    minghui
                </h2>
                <div class="ui container aligned">
                    <a class="blue ui button" href="http://www.minghui.org/">
                        网站链接
                    </a>
                    <div class="ui button">
                        编辑时间：2018-04-25
                    </div>
                </div>
                <div class="list">
                    <div class="item">
                        明慧网里边有一个页面，看链接就像是正常的新闻网站。但其实里边存放的都是
                    </div>
                    <div class="item">
                        明慧网里边有两种风格的界面。现在已经用contains的xpth修改过来了
                        <div class="ui button">
                            2018-04-25
                        </div>
                    </div>
                    <div class="item">
                        修改了img_urls的抓取范围，不再会抓取页面下边的两个小图片
                        <div class="ui button">
                            2018-04-25
                        </div>
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    http://www.tibenetwork.org/
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站无法工作了，
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    www.chinesepen.org
                </h2>
                <div class="list">
                    <div class="item">
                        这个网站的中文板块已经有了
                    </div>
                </div>
            </div>
            <div class="item">
                <h2>
                    www.chinesepen.org/english
                </h2>
                <div class="list">
                    <div class="item">
                        现在添加英文内容，英文内容和中文内容有些出入，重新添加了处理函数
                    </div>
                </div>
            </div>






            </div>
        </div>

    </div>

</div>